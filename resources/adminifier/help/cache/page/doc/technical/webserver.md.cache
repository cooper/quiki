{"css":"/* Background */ .bg { color: #272822; background-color: #fafafa; }\n/* PreWrapper */ .chroma { color: #272822; background-color: #fafafa; }\n/* Error */ .chroma .err { color: #960050; background-color: #1e0010 }\n/* LineLink */ .chroma .lnlinks { outline: none; text-decoration: none; color: inherit }\n/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }\n/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; }\n/* LineHighlight */ .chroma .hl { background-color: #e1e1e1 }\n/* LineNumbersTable */ .chroma .lnt { white-space: pre; -webkit-user-select: none; user-select: none; margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #7f7f7f }\n/* LineNumbers */ .chroma .ln { white-space: pre; -webkit-user-select: none; user-select: none; margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #7f7f7f }\n/* Line */ .chroma .line { display: flex; }\n/* Keyword */ .chroma .k { color: #00a8c8 }\n/* KeywordConstant */ .chroma .kc { color: #00a8c8 }\n/* KeywordDeclaration */ .chroma .kd { color: #00a8c8 }\n/* KeywordNamespace */ .chroma .kn { color: #f92672 }\n/* KeywordPseudo */ .chroma .kp { color: #00a8c8 }\n/* KeywordReserved */ .chroma .kr { color: #00a8c8 }\n/* KeywordType */ .chroma .kt { color: #00a8c8 }\n/* Name */ .chroma .n { color: #111111 }\n/* NameAttribute */ .chroma .na { color: #75af00 }\n/* NameBuiltin */ .chroma .nb { color: #111111 }\n/* NameBuiltinPseudo */ .chroma .bp { color: #111111 }\n/* NameClass */ .chroma .nc { color: #75af00 }\n/* NameConstant */ .chroma .no { color: #00a8c8 }\n/* NameDecorator */ .chroma .nd { color: #75af00 }\n/* NameEntity */ .chroma .ni { color: #111111 }\n/* NameException */ .chroma .ne { color: #75af00 }\n/* NameFunction */ .chroma .nf { color: #75af00 }\n/* NameFunctionMagic */ .chroma .fm { color: #111111 }\n/* NameLabel */ .chroma .nl { color: #111111 }\n/* NameNamespace */ .chroma .nn { color: #111111 }\n/* NameOther */ .chroma .nx { color: #75af00 }\n/* NameProperty */ .chroma .py { color: #111111 }\n/* NameTag */ .chroma .nt { color: #f92672 }\n/* NameVariable */ .chroma .nv { color: #111111 }\n/* NameVariableClass */ .chroma .vc { color: #111111 }\n/* NameVariableGlobal */ .chroma .vg { color: #111111 }\n/* NameVariableInstance */ .chroma .vi { color: #111111 }\n/* NameVariableMagic */ .chroma .vm { color: #111111 }\n/* Literal */ .chroma .l { color: #ae81ff }\n/* LiteralDate */ .chroma .ld { color: #d88200 }\n/* LiteralString */ .chroma .s { color: #d88200 }\n/* LiteralStringAffix */ .chroma .sa { color: #d88200 }\n/* LiteralStringBacktick */ .chroma .sb { color: #d88200 }\n/* LiteralStringChar */ .chroma .sc { color: #d88200 }\n/* LiteralStringDelimiter */ .chroma .dl { color: #d88200 }\n/* LiteralStringDoc */ .chroma .sd { color: #d88200 }\n/* LiteralStringDouble */ .chroma .s2 { color: #d88200 }\n/* LiteralStringEscape */ .chroma .se { color: #8045ff }\n/* LiteralStringHeredoc */ .chroma .sh { color: #d88200 }\n/* LiteralStringInterpol */ .chroma .si { color: #d88200 }\n/* LiteralStringOther */ .chroma .sx { color: #d88200 }\n/* LiteralStringRegex */ .chroma .sr { color: #d88200 }\n/* LiteralStringSingle */ .chroma .s1 { color: #d88200 }\n/* LiteralStringSymbol */ .chroma .ss { color: #d88200 }\n/* LiteralNumber */ .chroma .m { color: #ae81ff }\n/* LiteralNumberBin */ .chroma .mb { color: #ae81ff }\n/* LiteralNumberFloat */ .chroma .mf { color: #ae81ff }\n/* LiteralNumberHex */ .chroma .mh { color: #ae81ff }\n/* LiteralNumberInteger */ .chroma .mi { color: #ae81ff }\n/* LiteralNumberIntegerLong */ .chroma .il { color: #ae81ff }\n/* LiteralNumberOct */ .chroma .mo { color: #ae81ff }\n/* Operator */ .chroma .o { color: #f92672 }\n/* OperatorWord */ .chroma .ow { color: #f92672 }\n/* Punctuation */ .chroma .p { color: #111111 }\n/* Comment */ .chroma .c { color: #75715e }\n/* CommentHashbang */ .chroma .ch { color: #75715e }\n/* CommentMultiline */ .chroma .cm { color: #75715e }\n/* CommentSingle */ .chroma .c1 { color: #75715e }\n/* CommentSpecial */ .chroma .cs { color: #75715e }\n/* CommentPreproc */ .chroma .cp { color: #75715e }\n/* CommentPreprocFile */ .chroma .cpf { color: #75715e }\n/* GenericEmph */ .chroma .ge { font-style: italic }\n/* GenericStrong */ .chroma .gs { font-weight: bold }\n\n","file":"doc/technical/webserver.md","file_ne":"doc/technical/webserver","created":"2025-03-01T14:37:54.212433907-05:00","modified":"2025-03-01T14:37:54.212433907-05:00","generated":true,"external":true,"fmt_title":"webserver","title":"webserver","author":"Markdown","preview":"Contents webserver Usage func  Configure func  CreateWizardConfig func  InitWikis func  Listen func  TemplateNames type Options type Route type"}
<div class="q-main-doc/technical/webserver q-main">
    <ul class="q-toc">
        <li><strong>Contents</strong></li>
        <li>
            <a class="q-link-internal" href="#webserver">
                webserver
            </a>
            <ul>
                <li>
                    <a class="q-link-internal" href="#usage">
                        Usage
                    </a>
                    <ul>
                        <li>
                            <a class="q-link-internal" href="#func--configure">
                                func  Configure
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#func--createwizardconfig">
                                func  CreateWizardConfig
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#func--initwikis">
                                func  InitWikis
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#func--listen">
                                func  Listen
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#func--templatenames">
                                func  TemplateNames
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#type-options">
                                type Options
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#type-route">
                                type Route
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#type-servemux">
                                type ServeMux
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#func--newservemux">
                                func  NewServeMux
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#func-servemux-getroutes">
                                func (*ServeMux) GetRoutes
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#func-servemux-register">
                                func (*ServeMux) Register
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#func-servemux-registerfunc">
                                func (*ServeMux) RegisterFunc
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#type-wikiinfo">
                                type WikiInfo
                            </a>
                        </li>
                        <li>
                            <a class="q-link-internal" href="#func-wikiinfo-copy">
                                func (*WikiInfo) Copy
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    <div class="q-sec">
        <h1 class="q-sec-title" id="qa-webserver">
            webserver
        </h1>
        <p class="q-p">
            --
        </p>
<pre class="q-code chroma"><span class="line"><span class="cl">import &#34;.&#34;
</span></span></pre>
        <p class="q-p">
            Package webserver is the newest webserver.
        </p>
        <div class="q-sec">
            <h2 class="q-sec-title" id="qa-usage">
                Usage
            </h2>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">Auth</span> <span class="o">*</span><span class="nx">authenticator</span><span class="p">.</span><span class="nx">Authenticator</span>
</span></span></pre>
            <p class="q-p">
                Auth is the server authentication service.
            </p>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">Conf</span> <span class="o">*</span><span class="nx">wikifier</span><span class="p">.</span><span class="nx">Page</span>
</span></span></pre>
            <p class="q-p">
                Conf is the webserver configuration page.
            </p>
            <p class="q-p">
                It is available only after Configure is called.
            </p>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">Server</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Server</span>
</span></span></pre>
            <p class="q-p">
                Server is the *http.Server.
            </p>
            <p class="q-p">
                It is available only after Configure is called.
            </p>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">SessMgr</span> <span class="o">*</span><span class="nx">scs</span><span class="p">.</span><span class="nx">SessionManager</span>
</span></span></pre>
            <p class="q-p">
                SessMgr is the session manager service.
            </p>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">Wikis</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="nx">WikiInfo</span>
</span></span></pre>
            <p class="q-p">
                Wikis is all wikis served by this webserver.
            </p>
            <div class="q-sec">
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-func--configure">
                        func  Configure
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Configure</span><span class="p">(</span><span class="nx">_initial_options</span> <span class="nx">Options</span><span class="p">)</span>
</span></span></pre>
                    <p class="q-p">
                        Configure parses a configuration file and initializes webserver.
                    </p>
                    <p class="q-p">
                        If any errors occur, the program is terminated.
                    </p>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-func--createwizardconfig">
                        func  CreateWizardConfig
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">CreateWizardConfig</span><span class="p">(</span><span class="nx">opts</span> <span class="nx">Options</span><span class="p">)</span>
</span></span></pre>
                    <p class="q-p">
                        CreateWizardConfig creates a new server config file given the options.
                    </p>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-func--initwikis">
                        func  InitWikis
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">InitWikis</span><span class="p">()</span> <span class="kt">error</span>
</span></span></pre>
                    <p class="q-p">
                        initialize all the wikis in the configuration
                    </p>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-func--listen">
                        func  Listen
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Listen</span><span class="p">()</span>
</span></span></pre>
                    <p class="q-p">
                        Listen runs the webserver indefinitely.
                    </p>
                    <p class="q-p">
                        Configure must be called first. If any errors occur, the program is terminated.
                    </p>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-func--templatenames">
                        func  TemplateNames
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">TemplateNames</span><span class="p">()</span> <span class="p">[]</span><span class="kt">string</span>
</span></span></pre>
                    <p class="q-p">
                        Returns the names of all available templates.
                    </p>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-type-options">
                        type Options
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Options</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Config</span>   <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Bind</span>     <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Port</span>     <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Host</span>     <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">WikisDir</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Pregen</span>   <span class="kt">bool</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></pre>
                    <p class="q-p">
                        Options is the webserver command line options.
                    </p>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">Opts</span> <span class="nx">Options</span>
</span></span></pre>
                    <p class="q-p">
                        Opts is the webserver options.
                    </p>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-type-route">
                        type Route
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Route</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Pattern</span>     <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Description</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></pre>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-type-servemux">
                        type ServeMux
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">ServeMux</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">ServeMux</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></pre>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">Mux</span> <span class="o">*</span><span class="nx">ServeMux</span>
</span></span></pre>
                    <p class="q-p">
                        Mux is the *http.ServeMux.
                    </p>
                    <p class="q-p">
                        It is available only after Configure is called.
                    </p>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-func--newservemux">
                        func  NewServeMux
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">NewServeMux</span><span class="p">()</span> <span class="o">*</span><span class="nx">ServeMux</span>
</span></span></pre>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-func-servemux-getroutes">
                        func (*ServeMux) GetRoutes
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">ServeMux</span><span class="p">)</span> <span class="nf">GetRoutes</span><span class="p">()</span> <span class="p">[]</span><span class="nx">Route</span>
</span></span></pre>
                    <p class="q-p">
                        GetRoutes returns the registered routes.
                    </p>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-func-servemux-register">
                        func (*ServeMux) Register
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">ServeMux</span><span class="p">)</span> <span class="nf">Register</span><span class="p">(</span><span class="nx">pattern</span><span class="p">,</span> <span class="nx">description</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">handler</span> <span class="nx">http</span><span class="p">.</span><span class="nx">Handler</span><span class="p">)</span>
</span></span></pre>
                    <p class="q-p">
                        Register registers the handler for the given pattern and adds to routes.
                    </p>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-func-servemux-registerfunc">
                        func (*ServeMux) RegisterFunc
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">ServeMux</span><span class="p">)</span> <span class="nf">RegisterFunc</span><span class="p">(</span><span class="nx">pattern</span><span class="p">,</span> <span class="nx">description</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">handler</span> <span class="kd">func</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">))</span>
</span></span></pre>
                    <p class="q-p">
                        RegisterFunc registers the handler function for the given pattern and adds to
                        routes.
                    </p>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-type-wikiinfo">
                        type WikiInfo
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">WikiInfo</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Name</span>  <span class="kt">string</span> <span class="c1">// wiki shortname</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Title</span> <span class="kt">string</span> <span class="c1">// wiki title from @name in the wiki config</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Logo</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Host</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="o">*</span><span class="nx">wiki</span><span class="p">.</span><span class="nx">Wiki</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></pre>
                    <p class="q-p">
                        WikiInfo represents a wiki hosted on this webserver.
                    </p>
                </div>
                <div class="q-sec">
                    <h4 class="q-sec-title" id="qa-func-wikiinfo-copy">
                        func (*WikiInfo) Copy
                    </h4>
<pre class="q-code chroma"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">wi</span> <span class="o">*</span><span class="nx">WikiInfo</span><span class="p">)</span> <span class="nf">Copy</span><span class="p">(</span><span class="nx">w</span> <span class="o">*</span><span class="nx">wiki</span><span class="p">.</span><span class="nx">Wiki</span><span class="p">)</span> <span class="o">*</span><span class="nx">WikiInfo</span>
</span></span></pre>
                    <p class="q-p">
                        Copy creates a WikiInfo with all the same options, minus Wiki. It is used for
                        working with multiple branches within a wiki.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
